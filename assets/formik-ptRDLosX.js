import{d as x}from"./deepmerge-gNZfItMb.js";import{i as Er,t as Sr,c as yr}from"./lodash-es-ilX40fIG.js";import{r as f}from"./react-gW1wapPy.js";import{i as D}from"./react-fast-compare-7MHDYGOm.js";import"./hoist-non-react-statics-5ehziS0F.js";function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n])}return e},T.apply(this,arguments)}function Tr(e,t){if(e==null)return{};var u={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(u[o]=e[o]);return u}var W=f.createContext(void 0);W.displayName="FormikContext";W.Provider;W.Consumer;function Nr(){var e=f.useContext(W);return e}var C=function(t){return typeof t=="function"},j=function(t){return t!==null&&typeof t=="object"},Br=function(t){return String(Math.floor(Number(t)))===t},X=function(t){return Object.prototype.toString.call(t)==="[object String]"},Z=function(t){return j(t)&&C(t.then)};function m(e,t,u,n){n===void 0&&(n=0);for(var o=Sr(t);e&&n<o.length;)e=e[o[n++]];return n!==o.length&&!e||e===void 0?u:e}function O(e,t,u){for(var n=yr(e),o=n,s=0,v=Sr(t);s<v.length-1;s++){var y=v[s],F=m(e,v.slice(0,s+1));if(F&&(j(F)||Array.isArray(F)))o=o[y]=yr(F);else{var b=v[s+1];o=o[y]=Br(b)&&Number(b)>=0?[]:{}}}return(s===0?e:o)[v[s]]===u?e:(u===void 0?delete o[v[s]]:o[v[s]]=u,s===0&&u===void 0&&delete n[v[s]],n)}function mr(e,t,u,n){u===void 0&&(u=new WeakMap),n===void 0&&(n={});for(var o=0,s=Object.keys(e);o<s.length;o++){var v=s[o],y=e[v];j(y)?u.get(y)||(u.set(y,!0),n[v]=Array.isArray(y)?[]:{},mr(y,t,u,n[v])):n[v]=t}return n}function Hr(e,t){switch(t.type){case"SET_VALUES":return T({},e,{values:t.payload});case"SET_TOUCHED":return T({},e,{touched:t.payload});case"SET_ERRORS":return D(e.errors,t.payload)?e:T({},e,{errors:t.payload});case"SET_STATUS":return T({},e,{status:t.payload});case"SET_ISSUBMITTING":return T({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return T({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return T({},e,{values:O(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return T({},e,{touched:O(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return T({},e,{errors:O(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return T({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return T({},e,{touched:mr(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return T({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return T({},e,{isSubmitting:!1});default:return e}}var k={},G={};function xr(e){var t=e.validateOnChange,u=t===void 0?!0:t,n=e.validateOnBlur,o=n===void 0?!0:n,s=e.validateOnMount,v=s===void 0?!1:s,y=e.isInitialValid,F=e.enableReinitialize,b=F===void 0?!1:F,er=e.onSubmit,Ir=Tr(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),c=T({validateOnChange:u,validateOnBlur:o,validateOnMount:v,onSubmit:er},Ir),A=f.useRef(c.initialValues),V=f.useRef(c.initialErrors||k),M=f.useRef(c.initialTouched||G),w=f.useRef(c.initialStatus),R=f.useRef(!1),L=f.useRef({});f.useEffect(function(){return R.current=!0,function(){R.current=!1}},[]);var br=f.useState(0),Ar=br[1],H=f.useRef({values:c.initialValues,errors:c.initialErrors||k,touched:c.initialTouched||G,status:c.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),E=H.current,p=f.useCallback(function(r){var i=H.current;H.current=Hr(i,r),i!==H.current&&Ar(function(a){return a+1})},[]),tr=f.useCallback(function(r,i){return new Promise(function(a,l){var d=c.validate(r,i);d==null?a(k):Z(d)?d.then(function(h){a(h||k)},function(h){l(h)}):a(d)})},[c.validate]),K=f.useCallback(function(r,i){var a=c.validationSchema,l=C(a)?a(i):a,d=i&&l.validateAt?l.validateAt(i,r):Gr(r,l);return new Promise(function(h,S){d.then(function(){h(k)},function(_){_.name==="ValidationError"?h(Pr(_)):S(_)})})},[c.validationSchema]),ir=f.useCallback(function(r,i){return new Promise(function(a){return a(L.current[r].validate(i))})},[]),nr=f.useCallback(function(r){var i=Object.keys(L.current).filter(function(l){return C(L.current[l].validate)}),a=i.length>0?i.map(function(l){return ir(l,m(r,l))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(a).then(function(l){return l.reduce(function(d,h,S){return h==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||h&&(d=O(d,i[S],h)),d},{})})},[ir]),Rr=f.useCallback(function(r){return Promise.all([nr(r),c.validationSchema?K(r):{},c.validate?tr(r):{}]).then(function(i){var a=i[0],l=i[1],d=i[2],h=x.all([a,l,d],{arrayMerge:Wr});return h})},[c.validate,c.validationSchema,nr,tr,K]),g=I(function(r){return r===void 0&&(r=E.values),p({type:"SET_ISVALIDATING",payload:!0}),Rr(r).then(function(i){return R.current&&(p({type:"SET_ISVALIDATING",payload:!1}),p({type:"SET_ERRORS",payload:i})),i})});f.useEffect(function(){v&&R.current===!0&&D(A.current,c.initialValues)&&g(A.current)},[v,g]);var B=f.useCallback(function(r){var i=r&&r.values?r.values:A.current,a=r&&r.errors?r.errors:V.current?V.current:c.initialErrors||{},l=r&&r.touched?r.touched:M.current?M.current:c.initialTouched||{},d=r&&r.status?r.status:w.current?w.current:c.initialStatus;A.current=i,V.current=a,M.current=l,w.current=d;var h=function(){p({type:"RESET_FORM",payload:{isSubmitting:!!r&&!!r.isSubmitting,errors:a,touched:l,status:d,values:i,isValidating:!!r&&!!r.isValidating,submitCount:r&&r.submitCount&&typeof r.submitCount=="number"?r.submitCount:0}})};if(c.onReset){var S=c.onReset(E.values,hr);Z(S)?S.then(h):h()}else h()},[c.initialErrors,c.initialStatus,c.initialTouched,c.onReset]);f.useEffect(function(){R.current===!0&&!D(A.current,c.initialValues)&&b&&(A.current=c.initialValues,B(),v&&g(A.current))},[b,c.initialValues,B,v,g]),f.useEffect(function(){b&&R.current===!0&&!D(V.current,c.initialErrors)&&(V.current=c.initialErrors||k,p({type:"SET_ERRORS",payload:c.initialErrors||k}))},[b,c.initialErrors]),f.useEffect(function(){b&&R.current===!0&&!D(M.current,c.initialTouched)&&(M.current=c.initialTouched||G,p({type:"SET_TOUCHED",payload:c.initialTouched||G}))},[b,c.initialTouched]),f.useEffect(function(){b&&R.current===!0&&!D(w.current,c.initialStatus)&&(w.current=c.initialStatus,p({type:"SET_STATUS",payload:c.initialStatus}))},[b,c.initialStatus,c.initialTouched]);var ar=I(function(r){if(L.current[r]&&C(L.current[r].validate)){var i=m(E.values,r),a=L.current[r].validate(i);return Z(a)?(p({type:"SET_ISVALIDATING",payload:!0}),a.then(function(l){return l}).then(function(l){p({type:"SET_FIELD_ERROR",payload:{field:r,value:l}}),p({type:"SET_ISVALIDATING",payload:!1})})):(p({type:"SET_FIELD_ERROR",payload:{field:r,value:a}}),Promise.resolve(a))}else if(c.validationSchema)return p({type:"SET_ISVALIDATING",payload:!0}),K(E.values,r).then(function(l){return l}).then(function(l){p({type:"SET_FIELD_ERROR",payload:{field:r,value:m(l,r)}}),p({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),gr=f.useCallback(function(r,i){var a=i.validate;L.current[r]={validate:a}},[]),Cr=f.useCallback(function(r){delete L.current[r]},[]),ur=I(function(r,i){p({type:"SET_TOUCHED",payload:r});var a=i===void 0?o:i;return a?g(E.values):Promise.resolve()}),or=f.useCallback(function(r){p({type:"SET_ERRORS",payload:r})},[]),lr=I(function(r,i){var a=C(r)?r(E.values):r;p({type:"SET_VALUES",payload:a});var l=i===void 0?u:i;return l?g(a):Promise.resolve()}),P=f.useCallback(function(r,i){p({type:"SET_FIELD_ERROR",payload:{field:r,value:i}})},[]),U=I(function(r,i,a){p({type:"SET_FIELD_VALUE",payload:{field:r,value:i}});var l=a===void 0?u:a;return l?g(O(E.values,r,i)):Promise.resolve()}),cr=f.useCallback(function(r,i){var a=i,l=r,d;if(!X(r)){r.persist&&r.persist();var h=r.target?r.target:r.currentTarget,S=h.type,_=h.name,J=h.id,Q=h.value,wr=h.checked,Yr=h.outerHTML,pr=h.options,Ur=h.multiple;a=i||_||J,l=/number|range/.test(S)?(d=parseFloat(Q),isNaN(d)?"":d):/checkbox/.test(S)?Kr(m(E.values,a),wr,Q):pr&&Ur?jr(pr):Q}a&&U(a,l)},[U,E.values]),$=I(function(r){if(X(r))return function(i){return cr(i,r)};cr(r)}),N=I(function(r,i,a){i===void 0&&(i=!0),p({type:"SET_FIELD_TOUCHED",payload:{field:r,value:i}});var l=a===void 0?o:a;return l?g(E.values):Promise.resolve()}),sr=f.useCallback(function(r,i){r.persist&&r.persist();var a=r.target,l=a.name,d=a.id,h=a.outerHTML,S=i||l||d;N(S,!0)},[N]),z=I(function(r){if(X(r))return function(i){return sr(i,r)};sr(r)}),fr=f.useCallback(function(r){C(r)?p({type:"SET_FORMIK_STATE",payload:r}):p({type:"SET_FORMIK_STATE",payload:function(){return r}})},[]),dr=f.useCallback(function(r){p({type:"SET_STATUS",payload:r})},[]),vr=f.useCallback(function(r){p({type:"SET_ISSUBMITTING",payload:r})},[]),Y=I(function(){return p({type:"SUBMIT_ATTEMPT"}),g().then(function(r){var i=r instanceof Error,a=!i&&Object.keys(r).length===0;if(a){var l;try{if(l=_r(),l===void 0)return}catch(d){throw d}return Promise.resolve(l).then(function(d){return R.current&&p({type:"SUBMIT_SUCCESS"}),d}).catch(function(d){if(R.current)throw p({type:"SUBMIT_FAILURE"}),d})}else if(R.current&&(p({type:"SUBMIT_FAILURE"}),i))throw r})}),Fr=I(function(r){r&&r.preventDefault&&C(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&C(r.stopPropagation)&&r.stopPropagation(),Y().catch(function(i){console.warn("Warning: An unhandled error was caught from submitForm()",i)})}),hr={resetForm:B,validateForm:g,validateField:ar,setErrors:or,setFieldError:P,setFieldTouched:N,setFieldValue:U,setStatus:dr,setSubmitting:vr,setTouched:ur,setValues:lr,setFormikState:fr,submitForm:Y},_r=I(function(){return er(E.values,hr)}),Lr=I(function(r){r&&r.preventDefault&&C(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&C(r.stopPropagation)&&r.stopPropagation(),B()}),Vr=f.useCallback(function(r){return{value:m(E.values,r),error:m(E.errors,r),touched:!!m(E.touched,r),initialValue:m(A.current,r),initialTouched:!!m(M.current,r),initialError:m(V.current,r)}},[E.errors,E.touched,E.values]),Mr=f.useCallback(function(r){return{setValue:function(a,l){return U(r,a,l)},setTouched:function(a,l){return N(r,a,l)},setError:function(a){return P(r,a)}}},[U,N,P]),kr=f.useCallback(function(r){var i=j(r),a=i?r.name:r,l=m(E.values,a),d={name:a,value:l,onChange:$,onBlur:z};if(i){var h=r.type,S=r.value,_=r.as,J=r.multiple;h==="checkbox"?S===void 0?d.checked=!!l:(d.checked=!!(Array.isArray(l)&&~l.indexOf(S)),d.value=S):h==="radio"?(d.checked=l===S,d.value=S):_==="select"&&J&&(d.value=d.value||[],d.multiple=!0)}return d},[z,$,E.values]),q=f.useMemo(function(){return!D(A.current,E.values)},[A.current,E.values]),Dr=f.useMemo(function(){return typeof y<"u"?q?E.errors&&Object.keys(E.errors).length===0:y!==!1&&C(y)?y(c):y:E.errors&&Object.keys(E.errors).length===0},[y,q,E.errors,c]),Or=T({},E,{initialValues:A.current,initialErrors:V.current,initialTouched:M.current,initialStatus:w.current,handleBlur:z,handleChange:$,handleReset:Lr,handleSubmit:Fr,resetForm:B,setErrors:or,setFormikState:fr,setFieldTouched:N,setFieldValue:U,setFieldError:P,setStatus:dr,setSubmitting:vr,setTouched:ur,setValues:lr,submitForm:Y,validateForm:g,validateField:ar,isValid:Dr,dirty:q,unregisterField:Cr,registerField:gr,getFieldProps:kr,getFieldMeta:Vr,getFieldHelpers:Mr,validateOnBlur:o,validateOnChange:u,validateOnMount:v});return Or}function Pr(e){var t={};if(e.inner){if(e.inner.length===0)return O(t,e.path,e.message);for(var o=e.inner,u=Array.isArray(o),n=0,o=u?o:o[Symbol.iterator]();;){var s;if(u){if(n>=o.length)break;s=o[n++]}else{if(n=o.next(),n.done)break;s=n.value}var v=s;m(t,v.path)||(t=O(t,v.path,v.message))}}return t}function Gr(e,t,u,n){u===void 0&&(u=!1);var o=rr(e);return t[u?"validateSync":"validate"](o,{abortEarly:!1,context:n||o})}function rr(e){var t=Array.isArray(e)?[]:{};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var n=String(u);Array.isArray(e[n])===!0?t[n]=e[n].map(function(o){return Array.isArray(o)===!0||Er(o)?rr(o):o!==""?o:void 0}):Er(e[n])?t[n]=rr(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function Wr(e,t,u){var n=e.slice();return t.forEach(function(s,v){if(typeof n[v]>"u"){var y=u.clone!==!1,F=y&&u.isMergeableObject(s);n[v]=F?x(Array.isArray(s)?[]:{},s,u):s}else u.isMergeableObject(s)?n[v]=x(e[v],s,u):e.indexOf(s)===-1&&n.push(s)}),n}function jr(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function Kr(e,t,u){if(typeof e=="boolean")return!!t;var n=[],o=!1,s=-1;if(Array.isArray(e))n=e,s=e.indexOf(u),o=s>=0;else if(!u||u=="true"||u=="false")return!!t;return t&&u&&!o?n.concat(u):o?n.slice(0,s).concat(n.slice(s+1)):n}var $r=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?f.useLayoutEffect:f.useEffect;function I(e){var t=f.useRef(e);return $r(function(){t.current=e}),f.useCallback(function(){for(var u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];return t.current.apply(void 0,n)},[])}var zr=f.forwardRef(function(e,t){var u=e.action,n=Tr(e,["action"]),o=u??"#",s=Nr(),v=s.handleReset,y=s.handleSubmit;return f.createElement("form",T({onSubmit:y,ref:t,onReset:v,action:o},n))});zr.displayName="Form";export{xr as u};
